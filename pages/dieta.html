<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>FitLink | Dieta</title>
    <link rel="stylesheet" href="/styles/dieta.css" />
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
<div class="app-container">
    <div class="sidebar" id="sidebar">
        <div class="logo">
            <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
                <i data-lucide="menu"></i>
            </button>
            <span class="logo-text" id="logoText">FitLink</span>
        </div>
        <nav class="nav">
            <a href="home.html" class="nav-link">
                <i data-lucide="home" class="nav-icon"></i>
                <span class="nav-text">Início</span>
            </a>
            <a href="treinos_p.html" class="nav-link">
                <i data-lucide="dumbbell" class="nav-icon"></i>
                <span class="nav-text">Treinos</span>
            </a>
            <a href="dieta.html" class="nav-link active">
                <i data-lucide="apple" class="nav-icon"></i>
                <span class="nav-text">Dieta</span>
            </a>
            <a href="dash.html" class="nav-link">
                <i data-lucide="bar-chart-3" class="nav-icon"></i>
                <span class="nav-text">Desempenho</span>
            </a>
            <a href="perfil.html" class="nav-link">
                <i data-lucide="user" class="nav-icon"></i>
                <span class="nav-text">Perfil</span>
            </a>
        </nav>
    </div>

    <div class="main-content" id="mainContent">
        <header class="dieta-header">
            <div class="header-content">
                <h1>Plano Alimentar</h1>
                <p class="welcome-message">Olá, João! Aqui está sua dieta recomendada:</p>
            </div>
            <div class="date-picker">
                <button class="date-nav" id="prevDay" aria-label="Dia anterior">
                    <i data-lucide="chevron-left"></i>
                </button>
                <span class="current-date" id="currentDate">7 de jun. de 2025</span>
                <button class="date-nav" id="nextDay" aria-label="Próximo dia">
                    <i data-lucide="chevron-right"></i>
                </button>
            </div>
        </header>

        <!-- Estado de carregamento -->
        <div class="loading-state" id="loadingState">
            <i data-lucide="loader" class="animate-spin"></i>
            <span>Processando...</span>
        </div>

        <div class="dieta-content">
            <div class="refeicao-card">
                <div class="refeicao-header">
                    <h2>Café da Manhã</h2>
                    <span class="refeicao-time">07:00 - 08:00</span>
                </div>
                <div class="refeicao-body">
                    <div class="refeicao-descricao">
                        Ovos mexidos (2 ovos inteiros + 1 clara), 2 fatias de pão integral e suco de laranja natural (200ml)
                    </div>
                    <div class="nutri-info">
                        <div class="nutri-badge protein">
                            <i data-lucide="egg"></i>
                            <span>25g proteína</span>
                        </div>
                        <div class="nutri-badge carbo">
                            <i data-lucide="wheat"></i>
                            <span>45g carboidratos</span>
                        </div>
                        <div class="nutri-badge fat">
                            <i data-lucide="droplet"></i>
                            <span>12g gorduras</span>
                        </div>
                    </div>
                </div>
                <div class="refeicao-actions">
                    <button class="action-button info" aria-label="Ver detalhes da refeição">
                        <i data-lucide="info"></i>
                        <span>Detalhes</span>
                    </button>
                    <button class="action-button confirm" aria-label="Marcar refeição como consumida">
                        <i data-lucide="check"></i>
                        <span>Marcar como consumido</span>
                    </button>
                </div>
            </div>

            <div class="refeicao-card">
                <div class="refeicao-header">
                    <h2>Almoço</h2>
                    <span class="refeicao-time">12:00 - 13:30</span>
                </div>
                <div class="refeicao-body">
                    <div class="refeicao-descricao">
                        Frango grelhado (150g), arroz integral (1 concha), salada verde à vontade e feijão (1/2 concha)
                    </div>
                    <div class="nutri-info">
                        <div class="nutri-badge protein">
                            <i data-lucide="drumstick"></i>
                            <span>40g proteína</span>
                        </div>
                        <div class="nutri-badge carbo">
                            <i data-lucide="wheat"></i>
                            <span>55g carboidratos</span>
                        </div>
                        <div class="nutri-badge fat">
                            <i data-lucide="droplet"></i>
                            <span>18g gorduras</span>
                        </div>
                    </div>
                </div>
                <div class="refeicao-actions">
                    <button class="action-button info" aria-label="Ver detalhes da refeição">
                        <i data-lucide="info"></i>
                        <span>Detalhes</span>
                    </button>
                    <button class="action-button confirm" aria-label="Marcar refeição como consumida">
                        <i data-lucide="check"></i>
                        <span>Marcar como consumido</span>
                    </button>
                </div>
            </div>

            <div class="refeicao-card">
                <div class="refeicao-header">
                    <h2>Lanche da Tarde</h2>
                    <span class="refeicao-time">15:30 - 16:30</span>
                </div>
                <div class="refeicao-body">
                    <div class="refeicao-descricao">
                        Iogurte natural (200g) com granola (30g) e 1 banana
                    </div>
                    <div class="nutri-info">
                        <div class="nutri-badge protein">
                            <i data-lucide="milk"></i>
                            <span>15g proteína</span>
                        </div>
                        <div class="nutri-badge carbo">
                            <i data-lucide="wheat"></i>
                            <span>35g carboidratos</span>
                        </div>
                        <div class="nutri-badge fat">
                            <i data-lucide="droplet"></i>
                            <span>8g gorduras</span>
                        </div>
                    </div>
                </div>
                <div class="refeicao-actions">
                    <button class="action-button info" aria-label="Ver detalhes da refeição">
                        <i data-lucide="info"></i>
                        <span>Detalhes</span>
                    </button>
                    <button class="action-button confirm" aria-label="Marcar refeição como consumida">
                        <i data-lucide="check"></i>
                        <span>Marcar como consumido</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="daily-summary">
            <div class="summary-card">
                <h3>Resumo Nutricional Diário</h3>
                <div class="macros-container">
                    <div class="macro-progress">
                        <div class="progress-circle protein" data-value="80">
                            <svg viewBox="0 0 36 36" class="circular-chart">
                                <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                <path class="circle-fill" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                <text x="18" y="20.5" class="percentage">80g</text>
                            </svg>
                            <span>Proteína</span>
                        </div>
                    </div>
                    <div class="macro-progress">
                        <div class="progress-circle carbo" data-value="135">
                            <svg viewBox="0 0 36 36" class="circular-chart">
                                <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                <path class="circle-fill" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                <text x="18" y="20.5" class="percentage">135g</text>
                            </svg>
                            <span>Carboidratos</span>
                        </div>
                    </div>
                    <div class="macro-progress">
                        <div class="progress-circle fat" data-value="38">
                            <svg viewBox="0 0 36 36" class="circular-chart">
                                <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                <path class="circle-fill" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                <text x="18" y="20.5" class="percentage">38g</text>
                            </svg>
                            <span>Gorduras</span>
                        </div>
                    </div>
                </div>
                <div class="calories-info">
                    <span class="calories-total">1,250 kcal</span>
                    <span class="calories-goal">de 2,000 kcal diárias</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Inicializa os ícones
        lucide.createIcons();

        // Menu toggle
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');

        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('expanded');
            document.body.classList.toggle('sidebar-expanded');
        });

        // Date navigation
        const prevDayBtn = document.getElementById('prevDay');
        const nextDayBtn = document.getElementById('nextDay');
        const currentDateEl = document.getElementById('currentDate');
        const loadingState = document.getElementById('loadingState');

        let currentDate = new Date(2025, 5, 7); // 7 de junho de 2025

        function updateDateDisplay() {
            const options = { day: 'numeric', month: 'short', year: 'numeric' };
            currentDateEl.textContent = currentDate.toLocaleDateString('pt-BR', options);
        }

        prevDayBtn.addEventListener('click', function() {
            currentDate.setDate(currentDate.getDate() - 1);
            updateDateDisplay();
        });

        nextDayBtn.addEventListener('click', function() {
            currentDate.setDate(currentDate.getDate() + 1);
            updateDateDisplay();
        });

        updateDateDisplay();

        // Mark as consumed buttons
        const confirmButtons = document.querySelectorAll('.action-button.confirm');

        // Valores nutricionais totais
        let totalProtein = 80;
        let totalCarbs = 135;
        let totalFat = 38;
        let totalCalories = 1250;

        confirmButtons.forEach(button => {
            button.addEventListener('click', function() {
                const card = this.closest('.refeicao-card');
                if (card.classList.contains('consumed')) return;

                loadingState.style.display = 'flex';

                setTimeout(() => {
                    card.classList.add('consumed');
                    this.innerHTML = '<i data-lucide="check-circle"></i><span>Consumido</span>';
                    this.classList.add('consumed');

                    // Atualiza os ícones apenas para este botão
                    const newIcon = this.querySelector('i');
                    lucide.createIcons({ icons: { 'check-circle': newIcon } });

                    // Simula a adição dos nutrientes
                    if (card.querySelector('h2').textContent === 'Café da Manhã') {
                        totalProtein += 25;
                        totalCarbs += 45;
                        totalFat += 12;
                        totalCalories += 350;
                    } else if (card.querySelector('h2').textContent === 'Almoço') {
                        totalProtein += 40;
                        totalCarbs += 55;
                        totalFat += 18;
                        totalCalories += 550;
                    } else if (card.querySelector('h2').textContent === 'Lanche da Tarde') {
                        totalProtein += 15;
                        totalCarbs += 35;
                        totalFat += 8;
                        totalCalories += 250;
                    }

                    // Atualiza o resumo
                    document.querySelector('.protein .percentage').textContent = totalProtein + 'g';
                    document.querySelector('.carbo .percentage').textContent = totalCarbs + 'g';
                    document.querySelector('.fat .percentage').textContent = totalFat + 'g';
                    document.querySelector('.calories-total').textContent = totalCalories.toLocaleString('pt-BR') + ' kcal';

                    loadingState.style.display = 'none';
                }, 500);
            });
        });
    });
</script>
</body>
</html>